<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>screen capture</title>
</head>
<body>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.js"></script>
	<script>
	// function screenshot(selector) {
	//     var element = $(selector)[0];
	//     html2canvas(element, { onrendered: function(canvas) {
	//         var imgData = canvas.toDataURL();
	//         $('#screen_image')[0].src = imgData;
	//         $('#download')[0].href = imgData;
	//         $('#download')[0].innerHTML = "Download";
	//         $('#container').append('<a href="images/dl/test.png" download="test.png"> videoをダウンロードする</a>');
	//         // location.href = "images/dl/test.png";
	//     }});
	// }

	function erase_screenshot() {
	    $('#screen_image')[0].src = "";
	    $('#download')[0].href = "#";
	    $('#download')[0].innerHTML = "";
	}

	$(function(){
	    // $("a.download").on("click", function(e){
	    //     $target = $(e.target);
	    //     $target.attr({
	    //         download: "file.png",
	    //         href:  "images/dl/test.png"
	    //     });
	    // });
	    // location.href = "images/dl/test.png";

	    $('#shotPct').click(function(){
	    	// console.log(1);
	    	screenshot('#target_screen');
	    });
	    ///////////////
	    
	});

	function screenshot(selector) {
	    var element = $(selector);
	    html2canvas(element, { onrendered: function(canvas) {
	        var imgData = canvas.toDataURL();
	        $('#container').append('<a href="'+ imgData +'" download="test.png"> videoをダウンロードする</a>');
	        $('#container').append('<a href="'+ imgData +'" download="test.png"> <img src="'+ imgData +'" alt="" /></a>');
	        // location.href = "images/dl/test.png";
	    }});
	}


	</script>
	<div>
	  <!-- <button onclick="screenshot('#target_video')">Take a shot</button> -->
	  <button id="shotPct">shotPct</button>
	  <button onclick="erase_screenshot()">Clear</button>
	  
	</div>
	<hr />
	<b>DOM:</b>
	<div id="target_screen">
	  <input type="text" value="abcdefghijklmn" /> 
	  <entry><img src=""/>test</entry>
	  <entry><img src=""/>test1</entry> 
	  <entry><img src=""/>test2</entry> 
	</div>
	
	<div id="target_video">
		  <video controls="controls">
			<source src='video/sample.mp4' type="video/mp4">
			<p id='test'>動画を再生するには、videoタグをサポートしたブラウザが必要です。</p>
		</video>
	</div>
	<hr />
	<b>Image:</b>
	<div id="output_screen">
	  <img id="screen_image">
	</div>
	<hr />
	<a id="download" href="#" download="test.png"></a>
	<div id="container"></div>
	<a href="#" class="download">ImageDownload</a>
</body>
</html>